<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="used">
	<select id="selectAll" resultType="com.me.rentalme.model.entity.UsedVo"> <!-- 중고거래 테스트용 -->
		 SELECT BRAND_NM,MODEL_NM,USED_GDS_PRICE 
		 FROM tb_used100
	</select>
	<select id="selectOne" resultType="com.me.rentalme.model.entity.UsedVo"> <!-- 중고list 검색 -->
		 SELECT USED_GDS_NO,BRAND_NM,MODEL_NM,USED_GDS_PRICE,IMG1 
		 FROM tb_used100
		 WHERE GDS_MCLASS_CD=#{gdsMclassCd} AND MODEL_NM LIKE CONCAT('%',#{modelNm},'%')
	</select>
	<select id="detailOne" resultType="com.me.rentalme.model.entity.UsedVo"> <!-- 중고detail -->
		SELECT * 
		FROM tb_used100
		WHERE USED_GDS_NO=#{USED_GDS_NO}
	</select>
	
	<insert id="seqInsert" parameterType="com.me.rentalme.model.entity.UsedVo"> <!-- 시퀀스 번호 1증가 -->
		INSERT INTO SEQ_USED100 VALUES(NULL)
	</insert>
	<insert id="insertOne" parameterType="com.me.rentalme.model.entity.UsedVo"> <!-- 중고물품 추가 -->
		 INSERT INTO tb_used100 (USED_GDS_NO,USED_GDS_DT,GDS_LCLASS_CD,GDS_MCLASS_CD,GDS_SCLASS_CD,GDS_GB_CD,BRAND_NM,MODEL_NM,SUB,USED_GDS_PRICE,CONTENT,IMG1,IMG2,IMG3,IMG4) 
		 SELECT MAX(LPAD(SEQ,8,0)),DATE_FORMAT(now(), '%Y%m%d'),#{GDS_LCLASS_CD},#{GDS_MCLASS_CD},#{GDS_SCLASS_CD},'U',#{BRAND_NM},#{MODEL_NM},#{SUB},#{USED_GDS_PRICE},#{CONTENT},#{IMG1},#{IMG2},#{IMG3},#{IMG4} 
		 FROM SEQ_USED100
	</insert>
</mapper>